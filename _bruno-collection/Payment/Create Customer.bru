meta {
  name: Create Customer
  type: http
  seq: 2
}

post {
  url: {{GATEWAY_URL}}/api/payments/create-customer
  body: json
  auth: bearer
}

auth:bearer {
  token: {{ACCESS_TOKEN}}
}

body:json {
  {
    "email": "customer@example.com",
    "name": "John Doe",
    "phone": "+33123456789"
  }
}

script:post-response {
  if (res.status === 200 || res.status === 201) {
    console.log('âœ… Customer created successfully');
    console.log('ğŸ‘¤ Customer ID:', res.body.customerId);
    console.log('ğŸ“§ Email:', res.body.email);
    bruno.setVar('STRIPE_CUSTOMER_ID', res.body.customerId);
  } else {
    console.error('âŒ Failed to create customer:', res.status, res.body);
  }
}
