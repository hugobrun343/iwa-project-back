# Test profile configuration - minimal setup
# NOTE: Do not set spring.profiles.active in a profile-specific file

# Web application type must be reactive for Spring Cloud Gateway
spring.main.web-application-type=reactive

# Completely disable Kafka
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration

# Disable OAuth2 Resource Server for tests (no Keycloak in test environment)
spring.security.oauth2.resourceserver.jwt.issuer-uri=
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=

# Use H2 in-memory database
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false

# Disable devtools
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# Minimal logging
logging.level.root=WARN
logging.level.com.iwaproject=INFO
logging.level.org.springframework.cloud.gateway=DEBUG

# Environment variables for tests
CORS_GATEWAY_ORIGINS=http://localhost:3000,http://localhost:8085
GATEWAY_SECRET=test-secret
USER_SERVICE_URL=http://localhost:8081
KEYCLOAK_URL=http://localhost:8080
ANNOUNCEMENT_SERVICE_URL=http://localhost:8082
APPLICATION_SERVICE_URL=http://localhost:8083
CHAT_SERVICE_URL=http://localhost:8085
FAVORITE_SERVICE_URL=http://localhost:8084
RATING_SERVICE_URL=http://localhost:8086
PAYMENT_SERVICE_URL=http://localhost:8088
KEYCLOAK_REALM=master
KEYCLOAK_CLIENT_ID=iwa-client
KEYCLOAK_CLIENT_SECRET=test-secret
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
